<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#9F42BC"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-04-15T20:14:21.699812748"><title>Container Internals: Como Funciona Por Dentro ğŸ”¬ | Learn Docker</title><script type="application/json" id="virtual-toc-data">[{"id":"linux-namespaces","level":0,"title":"Linux Namespaces ğŸ°","anchor":"#linux-namespaces"},{"id":"control-groups-cgroups-v2","level":0,"title":"Control Groups (cgroups) v2 ğŸ›ï¸","anchor":"#control-groups-cgroups-v2"},{"id":"union-file-system-deep-dive","level":0,"title":"Union File System Deep Dive ğŸ“¦","anchor":"#union-file-system-deep-dive"},{"id":"container-runtime-spec","level":0,"title":"Container Runtime Spec ğŸƒ","anchor":"#container-runtime-spec"},{"id":"security-internals","level":0,"title":"Security Internals ğŸ”’","anchor":"#security-internals"},{"id":"advanced-networking","level":0,"title":"Advanced Networking ğŸŒ","anchor":"#advanced-networking"},{"id":"storage-deep-dive","level":0,"title":"Storage Deep Dive ğŸ’¾","anchor":"#storage-deep-dive"},{"id":"advanced-debugging","level":0,"title":"Advanced Debugging ğŸ”","anchor":"#advanced-debugging"},{"id":"performance-tuning","level":0,"title":"Performance Tuning âš¡","anchor":"#performance-tuning"},{"id":"waifu-tips","level":0,"title":"Waifu Tips ğŸ®","anchor":"#waifu-tips"},{"id":"refer-ncias-t-cnicas","level":0,"title":"ReferÃªncias TÃ©cnicas ğŸ“š","anchor":"#refer-ncias-t-cnicas"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><link rel="icon" type="image/svg" sizes="16x16" href="images/logo-primary.svg"><meta name="image" content="logo-primary.svg"><!-- Open Graph --><meta property="og:title" content="Container Internals: Como Funciona Por Dentro ğŸ”¬ | Learn Docker"><meta property="og:description" content=""><meta property="og:image" content="logo-primary.svg"><meta property="og:site_name" content="Learn Docker Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/container-internals.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="logo-primary.svg"><meta name="twitter:title" content="Container Internals: Como Funciona Por Dentro ğŸ”¬ | Learn Docker"><meta name="twitter:description" content=""><meta name="twitter:creator" content="logo-primary.svg"><meta name="twitter:image:src" content="logo-primary.svg"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/container-internals.html#webpage",
    "url": "writerside-documentation/container-internals.html",
    "name": "Container Internals: Como Funciona Por Dentro ğŸ”¬ | Learn Docker",
    "description": "",
    "image": "logo-primary.svg",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Learn Docker Help"
}</script><!-- End Schema.org --></head><body data-id="container-internals" data-main-title="Container Internals: Como Funciona Por Dentro ğŸ”¬" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="INIT: Container Matrix///Phase 3: Core Concepts///containers-101.md|Containers 101"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Learn Docker  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="container-internals" id="container-internals.md">Container Internals: Como Funciona Por Dentro ğŸ”¬</h1><div class="code-block" data-lang="none">
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  CONTAINER INTERNALS MATRIX                                           â•‘
â•‘                                                                       â•‘
â•‘  [ Namespaces + Cgroups + UnionFS = Container ]                      â•‘
â•‘                                                                       â•‘
â•‘  &quot;Isolamento, Controle e EficiÃªncia&quot;                                 â•‘
â•‘                                                                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
</div><section class="chapter"><h2 id="linux-namespaces" data-toc="linux-namespaces">Linux Namespaces ğŸ°</h2><section class="chapter"><h3 id="tipos-de-namespaces-detalhados" data-toc="tipos-de-namespaces-detalhados">Tipos de Namespaces Detalhados</h3><section class="chapter"><h4 id="1-pid-namespace" data-toc="1-pid-namespace">1. PID Namespace</h4><div class="code-block" data-lang="none">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Host PID Namespace      â”‚
â”‚  pid: 1234             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚Container PID NS  â”‚  â”‚
â”‚  â”‚  pid: 1         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div><ul class="list _bullet" id="z4rrrmj_20"><li class="list__item" id="z4rrrmj_21"><p id="z4rrrmj_25">Isolamento de processos</p></li><li class="list__item" id="z4rrrmj_22"><p id="z4rrrmj_26">Hierarquia pr&oacute;pria</p></li><li class="list__item" id="z4rrrmj_23"><p id="z4rrrmj_27">PID 1 como init</p></li><li class="list__item" id="z4rrrmj_24"><p id="z4rrrmj_28">Nested namespaces</p></li></ul></section><section class="chapter"><h4 id="2-network-namespace" data-toc="2-network-namespace">2. Network Namespace</h4><div class="code-block" data-lang="none">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Host Network               â”‚
â”‚ eth0: 192.168.1.10        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚Container Net NS      â”‚  â”‚
â”‚  â”‚ eth0: 172.17.0.2    â”‚  â”‚
â”‚  â”‚ lo: 127.0.0.1       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div><ul class="list _bullet" id="z4rrrmj_30"><li class="list__item" id="z4rrrmj_31"><p id="z4rrrmj_35">Interface virtual</p></li><li class="list__item" id="z4rrrmj_32"><p id="z4rrrmj_36">Routing tables pr&oacute;prias</p></li><li class="list__item" id="z4rrrmj_33"><p id="z4rrrmj_37">Firewall rules</p></li><li class="list__item" id="z4rrrmj_34"><p id="z4rrrmj_38">Socket isolation</p></li></ul></section><section class="chapter"><h4 id="3-mount-namespace" data-toc="3-mount-namespace">3. Mount Namespace</h4><div class="code-block" data-lang="none">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Host Mount NS          â”‚
â”‚  /                     â”‚
â”‚  â”œâ”€â”€ bin              â”‚
â”‚  â”œâ”€â”€ etc              â”‚
â”‚  â””â”€â”€ container_root    â”‚
â”‚      â””â”€â”€ [Container]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div><ul class="list _bullet" id="z4rrrmj_40"><li class="list__item" id="z4rrrmj_41"><p id="z4rrrmj_45">Filesystem isolation</p></li><li class="list__item" id="z4rrrmj_42"><p id="z4rrrmj_46">Bind mounts</p></li><li class="list__item" id="z4rrrmj_43"><p id="z4rrrmj_47">Pivoting root</p></li><li class="list__item" id="z4rrrmj_44"><p id="z4rrrmj_48">Mount propagation</p></li></ul></section></section></section><section class="chapter"><h2 id="control-groups-cgroups-v2" data-toc="control-groups-cgroups-v2">Control Groups (cgroups) v2 ğŸ›ï¸</h2><section class="chapter"><h3 id="hierarquia-unificada" data-toc="hierarquia-unificada">Hierarquia Unificada</h3><div class="code-block" data-lang="none">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /sys/fs/cgroup/                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”œâ”€â”€ container.slice            â”‚
â”‚ â”‚   â”œâ”€â”€ memory.max            â”‚
â”‚ â”‚   â”œâ”€â”€ cpu.max               â”‚
â”‚ â”‚   â””â”€â”€ io.max                â”‚
â”‚ â””â”€â”€ system.slice              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></section><section class="chapter"><h3 id="controllers-detalhados" data-toc="controllers-detalhados">Controllers Detalhados</h3><section class="chapter"><h4 id="cpu-controller" data-toc="cpu-controller">CPU Controller</h4><div class="code-block" data-lang="bash">
# Limitar CPU para 50%
echo &quot;50000 100000&quot; &gt; cpu.max

# Definir peso CPU
echo &quot;100&quot; &gt; cpu.weight
</div></section><section class="chapter"><h4 id="memory-controller" data-toc="memory-controller">Memory Controller</h4><div class="code-block" data-lang="bash">
# Limite de memÃ³ria
echo &quot;256M&quot; &gt; memory.max

# Soft limit
echo &quot;200M&quot; &gt; memory.high
</div></section><section class="chapter"><h4 id="i-o-controller" data-toc="i-o-controller">I/O Controller</h4><div class="code-block" data-lang="bash">
# Limite de I/O
echo &quot;10485760&quot; &gt; io.max

# Peso I/O
echo &quot;100&quot; &gt; io.weight
</div></section></section></section><section class="chapter"><h2 id="union-file-system-deep-dive" data-toc="union-file-system-deep-dive">Union File System Deep Dive ğŸ“¦</h2><section class="chapter"><h3 id="overlay2-internals" data-toc="overlay2-internals">Overlay2 Internals</h3><div class="code-block" data-lang="none">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Container Layer (Upper)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Container Write Layer      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Image Layer N (Lower)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Image Layer 2 (Lower)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Base Layer (Lower)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></section><section class="chapter"><h3 id="layer-operations" data-toc="layer-operations">Layer Operations</h3><div class="code-block" data-lang="none">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Write Operation        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Copy-Up          â”‚   â”‚
â”‚ â”‚ Modify Upper     â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></section><section class="chapter"><h3 id="directory-structure" data-toc="directory-structure">Directory Structure</h3><div class="code-block" data-lang="bash">
/var/lib/docker/overlay2/
â”œâ”€â”€ l/                  # Layer shortcuts
â”œâ”€â”€ [layer-id]/         # Layer content
â”‚   â”œâ”€â”€ diff/          # Layer fs content
â”‚   â”œâ”€â”€ work/          # Overlay work dir
â”‚   â”œâ”€â”€ merged/        # Mount point
â”‚   â””â”€â”€ lower          # Lower layer refs
</div></section></section><section class="chapter"><h2 id="container-runtime-spec" data-toc="container-runtime-spec">Container Runtime Spec ğŸƒ</h2><section class="chapter"><h3 id="oci-runtime-specification" data-toc="oci-runtime-specification">OCI Runtime Specification</h3><div class="code-block" data-lang="none">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ runtime-spec               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”œâ”€â”€ config.json          â”‚
â”‚ â”œâ”€â”€ rootfs/              â”‚
â”‚ â””â”€â”€ state.json          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></section><section class="chapter"><h3 id="container-lifecycle-states" data-toc="container-lifecycle-states">Container Lifecycle States</h3><div class="code-block" data-lang="none">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ creating â”‚ â”€â”€â–º â”‚ created  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ stopped  â”‚ â—„â”€â”€ â”‚ running  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></section></section><section class="chapter"><h2 id="security-internals" data-toc="security-internals">Security Internals ğŸ”’</h2><section class="chapter"><h3 id="linux-capabilities" data-toc="linux-capabilities">Linux Capabilities</h3><div class="code-block" data-lang="none">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Default Container Capabilities â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CHOWN          â”‚ SETUID       â”‚
â”‚ DAC_OVERRIDE   â”‚ SETGID       â”‚
â”‚ FOWNER         â”‚ NET_BIND     â”‚
â”‚ MKNOD          â”‚ SYS_CHROOT   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></section><section class="chapter"><h3 id="seccomp-profiles" data-toc="seccomp-profiles">Seccomp Profiles</h3><div class="code-block" data-lang="json">
{
  &quot;defaultAction&quot;: &quot;SCMP_ACT_ERRNO&quot;,
  &quot;architectures&quot;: [&quot;SCMP_ARCH_X86_64&quot;],
  &quot;syscalls&quot;: [
    {
      &quot;names&quot;: [&quot;read&quot;, &quot;write&quot;],
      &quot;action&quot;: &quot;SCMP_ACT_ALLOW&quot;
    }
  ]
}
</div></section><section class="chapter"><h3 id="apparmor-profiles" data-toc="apparmor-profiles">AppArmor Profiles</h3><div class="code-block" data-lang="none">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Docker Default Profile     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ file,                     â”‚
â”‚ network,                  â”‚
â”‚ capability,               â”‚
â”‚ mount                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></section></section><section class="chapter"><h2 id="advanced-networking" data-toc="advanced-networking">Advanced Networking ğŸŒ</h2><section class="chapter"><h3 id="cni-container-network-interface" data-toc="cni-container-network-interface">CNI (Container Network Interface)</h3><div class="code-block" data-lang="none">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CNI Architecture          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Plugin   â”‚ â”‚ IPAM     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></section><section class="chapter"><h3 id="network-drivers" data-toc="network-drivers">Network Drivers</h3><div class="code-block" data-lang="none">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Network Driver Types       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ bridge                    â”‚
â”‚ host                      â”‚
â”‚ overlay                   â”‚
â”‚ macvlan                   â”‚
â”‚ none                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></section></section><section class="chapter"><h2 id="storage-deep-dive" data-toc="storage-deep-dive">Storage Deep Dive ğŸ’¾</h2><section class="chapter"><h3 id="storage-driver-operations" data-toc="storage-driver-operations">Storage Driver Operations</h3><div class="code-block" data-lang="none">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Storage Driver Stack       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Container Layer           â”‚
â”‚ Image Layers              â”‚
â”‚ Storage Driver           â”‚
â”‚ Block Device             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></section><section class="chapter"><h3 id="volume-types" data-toc="volume-types">Volume Types</h3><div class="code-block" data-lang="none">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Volume Types               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Named Volumes             â”‚
â”‚ Bind Mounts               â”‚
â”‚ tmpfs Mounts             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></section></section><section class="chapter"><h2 id="advanced-debugging" data-toc="advanced-debugging">Advanced Debugging ğŸ”</h2><section class="chapter"><h3 id="trace-commands" data-toc="trace-commands">Trace Commands</h3><div class="code-block" data-lang="bash">
# Syscall tracing
strace -p $PID

# Network tracing
tcpdump -i any container_port

# Block I/O tracing
blktrace -d /dev/sda -o trace
</div></section><section class="chapter"><h3 id="profiling" data-toc="profiling">Profiling</h3><div class="code-block" data-lang="bash">
# CPU profiling
perf record -p $PID

# Memory profiling
heaptrack $PID
</div></section></section><section class="chapter"><h2 id="performance-tuning" data-toc="performance-tuning">Performance Tuning âš¡</h2><section class="chapter"><h3 id="resource-optimization" data-toc="resource-optimization">Resource Optimization</h3><div class="code-block" data-lang="none">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Performance Factors        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CPU Scheduling            â”‚
â”‚ Memory Management         â”‚
â”‚ I/O Throughput           â”‚
â”‚ Network Latency          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></section><section class="chapter"><h3 id="monitoring-metrics" data-toc="monitoring-metrics">Monitoring Metrics</h3><div class="code-block" data-lang="bash">
# CPU stats
docker stats --format &quot;table {{.Container}}\t{{.CPUPerc}}&quot;

# Memory usage
docker stats --format &quot;table {{.Container}}\t{{.MemUsage}}&quot;
</div></section></section><section class="chapter"><h2 id="waifu-tips" data-toc="waifu-tips">Waifu Tips ğŸ®</h2><aside class="prompt" data-type="tip" data-title="" id="z4rrrmj_90"><p id="z4rrrmj_93"><span class="control" id="z4rrrmj_94">Runtime-chan diz:</span> &quot;OCI &eacute; como um contrato m&aacute;gico que garante que todos os containers falem a mesma l&iacute;ngua!&quot;</p></aside><aside class="prompt" data-type="warning" data-title="" id="z4rrrmj_91"><p id="z4rrrmj_95"><span class="control" id="z4rrrmj_96">Security-sama avisa:</span> &quot;Capabilities s&atilde;o como superpoderes - use com responsabilidade!&quot;</p></aside><aside class="prompt" data-type="note" data-title="" id="z4rrrmj_92"><p id="z4rrrmj_97"><span class="control" id="z4rrrmj_98">Network-chan lembra:</span> &quot;CNI &eacute; como um protocolo de comunica&ccedil;&atilde;o entre dimens&otilde;es paralelas!&quot;</p></aside></section><section class="chapter"><h2 id="refer-ncias-t-cnicas" data-toc="refer-ncias-t-cnicas">Refer&ecirc;ncias T&eacute;cnicas ğŸ“š</h2><section class="chapter"><h3 id="documenta-o-oficial" data-toc="documenta-o-oficial">Documenta&ccedil;&atilde;o Oficial</h3><ul class="list _bullet" id="z4rrrmj_102"><li class="list__item" id="z4rrrmj_103"><p id="z4rrrmj_107">OCI Runtime Specification</p></li><li class="list__item" id="z4rrrmj_104"><p id="z4rrrmj_108">Linux Kernel Documentation</p></li><li class="list__item" id="z4rrrmj_105"><p id="z4rrrmj_109">Docker Engine Internals</p></li><li class="list__item" id="z4rrrmj_106"><p id="z4rrrmj_110">Container Security Guide</p></li></ul></section><section class="chapter"><h3 id="ferramentas-teis" data-toc="ferramentas-teis">Ferramentas &Uacute;teis</h3><ul class="list _bullet" id="z4rrrmj_111"><li class="list__item" id="z4rrrmj_112"><p id="z4rrrmj_117">nsenter</p></li><li class="list__item" id="z4rrrmj_113"><p id="z4rrrmj_118">unshare</p></li><li class="list__item" id="z4rrrmj_114"><p id="z4rrrmj_119">runc</p></li><li class="list__item" id="z4rrrmj_115"><p id="z4rrrmj_120">ctr</p></li><li class="list__item" id="z4rrrmj_116"><p id="z4rrrmj_121">nerdctl</p></li></ul></section><section class="chapter"><h3 id="debugging-tools" data-toc="debugging-tools">Debugging Tools</h3><ul class="list _bullet" id="z4rrrmj_122"><li class="list__item" id="z4rrrmj_123"><p id="z4rrrmj_127">strace</p></li><li class="list__item" id="z4rrrmj_124"><p id="z4rrrmj_128">tcpdump</p></li><li class="list__item" id="z4rrrmj_125"><p id="z4rrrmj_129">perf</p></li><li class="list__item" id="z4rrrmj_126"><p id="z4rrrmj_130">heaptrack</p></li></ul></section></section><div class="last-modified">15 abril 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="containers-101.html" class="navigation-links__prev">Containers 101</a><a href="container-runtime.html" class="navigation-links__next">Container Runtime: O Motor dos Containers ğŸš€</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>